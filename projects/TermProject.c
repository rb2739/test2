#include <stdio.h>
#include "TermProject.h"



int main()
{
	int Moo = 0;
	
	LoginScreen();

	do{
		
	MainScreen();

	MainSelcet();

	if(END == 5)
	{
		 return 0;
	}
	
	}while(Moo = 9);

	
	return 0;

	//getch();

}

void prn_line()
{
    printf("==========================================================================\n");
}


void LoginScreen()
{
	printf("\n\n\n\n\n\n\n\n\n\t\t\t\t\t");
	printf("┌─로그인───────┐\n");
	printf("\t\t\t\t\t│    이름 :            │\b\b\b\b\b\b");
	scanf("%s",&Stu[0][0].Name);
	printf("\t\t\t\t\t│    학번 :            │\b\b\b\b\b\b");
	scanf("%s",&Stu[0][0].number);
	printf("\t\t\t\t\t└───────────┘");	

	//getch();

}

void MainScreen()
{
	//system("cls");

	puts("\t\t\t┌─나의 성적관리 프로그램───────────────┐                  ┌─Login ───────┐");
	printf("\t\t\t│   Menu                                               │                  │    이름 : %s     │\n",Stu[0][0].Name);
	printf("\t\t\t│                                                      │                  │    학번 : %s   │\n",Stu[0][0].number);
	puts("\t\t\t│      - Diary / Grade -                               │                  └───────────┘");
	puts("\t\t\t│                                                      │");
	puts("\t\t\t│              1. 나의 성적 입력                       │");
	puts("\t\t\t│              2. 나의 성적 출력                       │");
	puts("\t\t\t│              3. 나의 시험일정                        │");
	puts("\t\t\t│                                                      │");
	puts("\t\t\t│      - Save -                                        │");
	puts("\t\t\t│                                                      │");	
	puts("\t\t\t│              4. 성적정보 저장하기                    │"); 
	puts("\t\t\t│              5. 나의일정 저장하기                    │");
	puts("\t\t\t│                                                      │");
	puts("\t\t\t│      - Q&A / Exit -                                  │");
	puts("\t\t\t│                                                      │");
	puts("\t\t\t│              6. 도움말                               │");
	puts("\t\t\t│              7. The End                              │");
	puts("\t\t\t│                                                      │");
	puts("\t\t\t└───────────────────────────┘");
	


}

void MainSelcet()
{
	
	int choice;
	
	printf("\t\t\t\t\tNo. : [ ]\b\b");
	scanf("%d", &choice);
	fflush(stdin);
	
	switch(choice)
	{
		case 1 :	GradeMenu_Input();	break;
		case 2 :	GradeMenu_Output();	break;
		case 3 :	Diary_Input();		break;
		case 4 :	SaveStudentFile();	break;
		case 5 :	SaveDiaryFile();	break;
		case 6 :	HelpDesk();			break;
		case 7 :	Exit();				break;
	}
	

 
}



void GradeMenu_Input()
{
	
	
	system("cls");

	puts("\t\t\t┌─성적입력(Menu)───────────────┐                          ┌─Login ───────┐");
	printf("\t\t\t│   환영합니다 %s님                        │                          │    이름 : %s     │\n",Stu[0][0].Name,Stu[0][0].Name);
	printf("\t\t\t└───────────────────────┘                          │    학번 : %s   │\n",Stu[0][0].number);
	puts("\t\t\t                                                                            └───────────┘");
		

	
	for(i=0;i<Sugang;i++)
    {
        for(j=0;j<1;j++)
        {
            printf("[%d]번째 과목입니다.\n\n",i+1);        
            
            printf("구분을 입력하세요(교선/교필/전선/전필/교양) : ");
            fflush(stdin);
			scanf("%s",Stu[i][j].Gubun);
            
            printf("과목명을 입력하세요(Ex.C언어 / C++ /Java) : ");
            fflush(stdin);
			scanf("%s",Stu[i][j+1].Class);
            
            printf("학점을 입력하세요(3학점/2학점/1학점 정수만입력) : ");
            fflush(stdin);
            scanf("%lf",&hak[i][j]);
            
            hak_sum1+=(hak[i][j]);                                
            
            printf("성적을 입력하세요(A+ ~ F): ");
            fflush(stdin);
			scanf("%s",Stu[i][j+2].Grade);     


			if(strcmp(Stu[i][j+2].Grade,"f")==0)
            {
                hak_sum2+=0; 
            }
            
			else if(strcmp(Stu[i][j+2].Grade,"F")==0)
            {
                hak_sum2+=0; 
            }
            
            else
            {
                hak_sum2+=(hak[i][j]); 
            }   
            
            printf("\n\n");       

	 
		}        
        
        
    }  
	tot=Trade(sum)/hak_sum1; //평점구하기
	ba=tot/4.5*100;  //백분율 구하기


	prn_line();
    printf("\t\t\t2009학년도 1학기\n");
    prn_line();
    printf("\t구분\t\t과목명\t\t학점\t\t성적\n");
    prn_line();

	for(i=0;i<Sugang;i++)
		{    
        for(j=0;j<1;j++)
			{
            
				printf("\t%s\t\t%s\t\t%3.f\t\t%3s\n",Stu[i][j].Gubun,Stu[i][j+1].Class,hak[i][j],Stu[i][j+2].Grade);
			}        
		}
	printf("\t\t총 수강과목\t신청학점\t이수학점\n");
    printf("\t\t%5d과목\t%2.f학점\t\t%3.f학점\t\t\n",Sugang,hak_sum1,hak_sum2);

	prn_line();  
    
    fflush(stdin);

	//getch();

}


void GradeMenu_Output()
{
	
	system("cls");

	
	puts("\t\t\t┌─성적입력(Menu)───────────────┐                          ┌─Login ───────┐");
	printf("\t\t\t│   환영합니다 %s님                        │                          │    이름 : %s     │\n",Stu[0][0].Name,Stu[0][0].Name);
	printf("\t\t\t└───────────────────────┘                          │    학번 : %s   │\n",Stu[0][0].number);
	puts("\t\t\t                                                                            └───────────┘");
	prn_line();
    printf("\t\t\t2009학년도 1학기\n");
    prn_line();
    printf("\t구분\t\t과목명\t\t학점\t\t성적\n");
    prn_line();

	for(i=0;i<Sugang;i++)
		{    
        for(j=0;j<1;j++)
			{
            
				printf("\t%s\t\t%s\t\t%3.f\t\t%3s\n",Stu[i][j].Gubun,Stu[i][j+1].Class,hak[i][j],Stu[i][j+2].Grade);
			}        
		}

	
	prn_line();  

	

	printf("총 수강과목\t신청학점\t이수학점\t평점평균\t백분율\n");
	prn_line();  
    printf("%5d과목\t%2.f학점\t\t%3.f학점\t\t%6.2f\t\t%2.2f\n",Sugang,hak_sum1,hak_sum2,tot,ba);

	prn_line();  
    
    fflush(stdin);

	//getch();


   
}

double Trade()       
{
    
    for(i=0;i<Sugang;i++)
    {
        for(j=0;j<1;j++)
        {
            
			if(strcmp(Stu[i][j+2].Grade,"a+")==0)  //문자열 비교함수 strcmp(string1,string2)==0 0일때가 참
            {
                sum+=4.5*hak[i][j];        
            }
            
            else if(strcmp(Stu[i][j+2].Grade,"A+")==0)
            {
                sum+=4.5*hak[i][j];        
            }
            
            else if(strcmp(Stu[i][j+2].Grade,"a")==0)
            {
                sum+=4.0*hak[i][j];        
            }
            
            else if(strcmp(Stu[i][j+2].Grade,"A")==0)
            {
                sum+=4.0*hak[i][j];        
            }
            
            else if(strcmp(Stu[i][j+2].Grade,"b+")==0)
            {
                sum+=3.5*hak[i][j];
            }
            
            else if(strcmp(Stu[i][j+2].Grade,"B+")==0)
            {
                sum+=3.5*hak[i][j];
            }
            
            else if(strcmp(Stu[i][j+2].Grade,"b")==0)
            {
                sum+=3.0*hak[i][j];
            }
            
            else if(strcmp(Stu[i][j+2].Grade,"B")==0)
            {
                sum+=3.0*hak[i][j];
            }
            
            else if(strcmp(Stu[i][j+2].Grade,"c+")==0)
            {
                sum+=2.5*hak[i][j];
            }
            
            else if(strcmp(Stu[i][j+2].Grade,"C+")==0)
            {
                sum+=2.5*hak[i][j];
            }
            
            else if(strcmp(Stu[i][j+2].Grade,"c")==0)
            {
                sum+=2.0*hak[i][j];
            }
            
            else if(strcmp(Stu[i][j+2].Grade,"C")==0)
            {
                sum+=2.0*hak[i][j];
            }
            
            else if(strcmp(Stu[i][j+2].Grade,"d+")==0)
            {
                sum+=1.5*hak[i][j];
            }
            
            else if(strcmp(Stu[i][j+2].Grade,"D+")==0)
            {
                sum+=1.5*hak[i][j];
            }
            
            else if(strcmp(Stu[i][j+2].Grade,"d")==0)
            {
                sum+=1.0*hak[i][j];
            }
            
            else if(strcmp(Stu[i][j+2].Grade,"D")==0)
            {
                sum+=1.0*hak[i][j];
            }
            
            else if(strcmp(Stu[i][j+2].Grade,"f")==0)
            {
                sum+=0*hak[i][j];     
            }
            
            else if(strcmp(Stu[i][j+2].Grade,"F")==0)
            {
                sum+=0*hak[i][j];     
            }
        }
    }
    
    return sum;   
    
}

void Diary_Input()
{

	
	
	system("cls");
	printf("\t\t\t┌─ Diary (Menu) ───────────────┐                          ┌─Login ───────┐\n");
	printf("\t\t\t│   환영합니다 %s님                        │                          │    이름 : %s     │\n",Stu[0][0].Name,Stu[0][0].Name);
	printf("\t\t\t└───────────────────────┘                          │    학번 : %s   │\n",Stu[0][0].number);
	puts("\t\t\t                                                                            └───────────┘");
		
	
	printf("\t\t\t\t┌─시험 일정 및 기념일을 입력하세요────────┐\n");	
	printf("\t\t\t\t│\t 입력 :                                     │\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b");	
	gets(Diary);      //직접 입력
	printf("\t\t\t\t└─────────────────────────┘");
	

	printf("\n\n\n\n\t\t\t\t┌─시험 일정 및 기념일 입력내용────────┐\n");
	printf("\t\t\t\t│\t 내용 :  %s                       │\n",Diary);
	printf("\t\t\t\t└───────────────────────┘\n");
	
	
	printf("\n\t\t\t\t\t메뉴화면으로 돌아갑니다");

	//getch();
		
}

void SaveStudentFile()
{

	FILE *FP;
	int i,j;

	
	FP = fopen("Student.txt", "w");

    fprintf(FP,"==========================================================================\n");
	fprintf(FP,"\t\t\t2009학년도 1학기\n");
    fprintf(FP,"==========================================================================\n");
    fprintf(FP,"\t구분\t\t과목명\t\t학점\t\t성적\n");
    fprintf(FP,"==========================================================================\n");
    
	for(i=0;i<Sugang;i++)
		{    
        for(j=0;j<1;j++)
			{
            
				fprintf(FP,"\t%s\t\t%s\t\t%3.f\t\t%3s\n",Stu[i][j].Gubun,Stu[i][j+1].Class,hak[i][j],Stu[i][j+2].Grade);
			}        
		}
    fprintf(FP,"==========================================================================\n");
	fprintf(FP,"총 수강과목\t신청학점\t이수학점\t평점평균\t백분율\n");
	fprintf(FP,"==========================================================================\n");
    fprintf(FP,"%5d과목\t%2.f학점\t\t%3.f학점\t\t%6.2f\t\t%2.2f\n",Sugang,hak_sum1,hak_sum2,tot,ba);
    fprintf(FP,"==========================================================================\n");
	 
    
    fflush(stdin);
	
	fclose(FP);
	puts("\n\t\t\t\t Student.txt is Saved");

	//getch();


	
}

void SaveDiaryFile()
{

	FILE *FPS;
	
	FPS = fopen("Diary.txt", "w");

    fprintf(FPS,"\n\t\t\t\t┌─시험 일정 및 기념일 입력내용────────┐\n");
	fprintf(FPS,"\t\t\t\t│\t 내용 :  %s                       │\n",Diary);
	fprintf(FPS,"\t\t\t\t└───────────────────────┘\n");
	
    
    fflush(stdin);
	
	fclose(FPS);
	puts("\n\t\t\t\t Diary.txt is Saved");

	//getch();
}

void HelpDesk()
{
	system("cls");

	puts("\t\t\t┌─도움말 (Menu) ───────────────────┐                  ┌─Login ───────┐");
	printf("\t\t\t│                                                      │                  │    이름 : %s     │\n",Stu[0][0].Name);
	printf("\t\t\t│                                                      │                  │    학번 : %s   │\n",Stu[0][0].number);
	puts("\t\t\t│  본 프로그램은 사용자의 성적 관리 및 일정을 관리     │                  └───────────┘");
	puts("\t\t\t│   하기 위하여 만들어진 프로그램입니다.               │");
	puts("\t\t\t│  학생의 성적을 입력/출력 하고 그 정보를 저장할 수    │");
	puts("\t\t\t│   있습니다. 또한, 일정관리를 통해 자신의 일정 및     │"); 
	puts("\t\t\t│  기념일 등을 추가하여 알아보기 쉽게 만들어 졌습니다. │");
	puts("\t\t\t│   많은 이용 부탁드립니다.                            │");
	puts("\t\t\t│                                                      │");
	puts("\t\t\t│  제작자 : Team 06조                                  │");
	puts("\t\t\t│  문의사항 H.P : 010-2512-5222                        │");
	puts("\t\t\t│                                                      │");
	puts("\t\t\t└───────────────────────────┘");

	//getch();
}


void Exit()
{
		printf("\t\t\t┌─ 프로그램을 종료합니다..!!  ──────────┐\n");	
		printf("\t\t\t│           안녕히가십시오 %s님..!!            │\n",Stu[0][0].Name);	
		printf("\t\t\t└─────────────────────────┘\n");

		END = 5;
}
